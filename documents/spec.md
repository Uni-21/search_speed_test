# 仕様コンセプト
- 名称：検索解決スピードテスト
- 概要：超シンプルな Web アプリ（ゲーム）
- 目的：出題される問題に対し、**いかに素早く正答できるか** を競う
- 解答手段は自由。生成 AI、Google 検索、SNS（X など）、自身の知識や推論など、現実世界の課題解決と同様に多様なアプローチが想定される。
- もちろん、自身の知識で即答できる場合が最速となる。

---
# 詳細仕様
## 1. タイマー
- **全問通算タイマー**を採用。
  - START 押下時に開始し、10 問を通じてリセットせずに計測を継続する。
  - 一時停止機能はなし。
- **途中離脱・再開**：ブラウザを閉じたりリロードした場合は、最初からやり直しとなり、通算タイマーもリセットされる。

## 2. 画面フロー
- **トップページ**：サイトタイトル、説明文、START ボタンのみを表示。
- **問題画面**：質問文、回答フォーム（自由入力）、通算経過時間、スキップボタンを表示。
- **問題数**：1 セッションにつき 10 問。
- **完了画面**：全問題完了後、「お疲れさまでした！」メッセージと「結果を見る」ボタンを表示。
- **結果画面**：総経過時間、正答率、未回答件数、総合点、20 段階のグレードを表示。

## 3. スキップ
- スキップは **誤答扱い** とし、正答率の分母に含めるが分子には含めない。
- 結果画面では **未回答（スキップ）件数** を明示する。
- スキップによる速度ペナルティはなし（通算タイマーはそのまま進行）。

## 4. 回答フォーム
- **自由入力**方式を採用。
- 問題文中に、必要に応じて表記の指定（例：かな／漢字、半角／全角など）を記載する。
- 採点時は以下の正規化を行う：
  - Unicode 正規化（NFKC）
  - 前後の空白除去、連続空白の正規化
  - 句読点・全角空白の除去
  - アルファベット小文字化
  - カナ表記のゆれ統一（カタカナ／ひらがな）
- 同義語や別表記は複数の受理候補として登録可能。

### 4.1. 回答フィードバック
- **正解時**：画面上部にトースト通知「✅ 正解です！」を表示（2秒間）し、即座に次の問題に自動遷移。
- **不正解時**：画面上部にトースト通知「❌ 不正解です」を表示（3秒間）し、同じ問題で再挑戦可能。
- **トースト通知**：固定位置（画面上部中央）にスライドダウンアニメーションで表示。

## 5. 問題データ
- 約 1,000 問を目標に、事前に大量の問題集を準備（別タスクで対応）。
- 1 セッションでは問題プールから **ランダム抽出（重複なし）** で 10 問を選出。
- 出題順はシャッフルする。

### 5.1. ジャンルと難易度

- 各問題にはジャンルと難易度を付与する。
- **ジャンル**（main のみを利用）：
  - 知識（例: 歴史、地理、科学基礎、スポーツ）
  - 思考力（例: 算数、数学、物理、なぞなぞ、論理クイズ）
  - 知識＋思考力（例: 数学応用、物理応用、統計クイズ）
- **難易度**：1〜5 の絶対基準で定義する。
  1. 瞬発系（即答可能なレベル、5秒以内、例: 日本の首都は？）
  2. 基礎レベル（教養・中学程度、5〜15秒、例: 72÷8は？）
  3. 標準レベル（高校程度、15〜60秒、例: n=10 のとき n(n+1)/2 の値は？）
  4. 応用レベル（大学入試程度、1〜3分、例: サイコロを2つ振ったとき和が7になる確率は？）
  5. 難問レベル（専門的・パズル系、3分以上、例: 有名な論理パズル「3人の神」問題）
- JSON サンプル：
```json
{
  "id": "q001",
  "prompt": "日本の首都は？",
  "type": "text",
  "acceptedAnswers": ["とうきょう", "tokyo", "東京"],
  "tags": ["geography", "japan"],
  "genre": "知識",
  "difficulty": 1
}
```

- ** セッションの標準構成（10 問）**：
  - 難問レベル（5）：1 問
  - 応用レベル（4）：1 問
  - 標準レベル（3）：3 問
  - 基礎レベル（2）：3 問
  - 瞬発系（1）：2 問


## 6. 採点ロジック
- 総合点（0–100）：`総合点 = 0.7 × 正答率(%) + 0.3 × 速度スコア(%)`
- 速度スコア（0–100）：
  - 基準時間 = 300 秒（10 問 × 30 秒を想定）
  - 計算式：`速度スコア(%) = clamp(0, 100 × (基準時間 / 実経過秒), 100)`
  - 解答が早いほど高得点。基準時間は調整可能。

## 7. チート対策
- **ハッシュ照合方式**を採用：
  - 正規化後の解答文字列を SHA-256 でハッシュ化し、問題データに格納された受理ハッシュ群と照合。
  - プレーンテキストの正答は含めない。
  - 同義語は複数のハッシュ値で登録可能。
- 必要に応じて軽度の難読化（Base64 等）や後半問題の遅延ロードを実施。
- 完全な秘匿は困難であるため、抑止レベルの対策に留める。

## 8. アクセシビリティ／多言語対応
- 初期版は日本語のみを提供。
- 文言リソースは i18n 対応を前提として管理し、将来的な多言語化を可能にする。

## 9. グレード（20 段階）
1. God
2. Genius
3. SSS  
4. SS  
5. S  
6. A+  
7. A  
8. A-  
9. B+  
10. B  
11. B-  
12. C+  
13. C  
14. C-  
15. D+  
16. D  
17. D-  
18. E+  
19. E  
20. E-